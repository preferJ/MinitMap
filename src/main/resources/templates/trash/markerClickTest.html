<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>simpleMap</title>
    <script
            src="https://apis.openapi.sk.com/tmap/jsv2?version=1&appKey=l7xx71377ca4d61b42018b3da0ede8c234fb"></script>
    <script type="text/javascript">
        var map;

        // 페이지가 로딩이 된 후 호출하는 함수입니다.
        function initTmap() {
            // map 생성
            // Tmapv2.Map을 이용하여, 지도가 들어갈 div, 넓이, 높이를 설정합니다.
            map = new Tmapv2.Map("map_div", {
                center: new Tmapv2.LatLng(37.566481622437934, 126.98502302169841),
                width: "100%",
                height: "400px"
            });
            //마커생성
            var marker = new Tmapv2.Marker({
                position: new Tmapv2.LatLng(37.566481622437934, 126.98502302169841), //Marker의 중심좌표 설정.
                draggable: true,
                map: map //Marker가 표시될 Map 설정.
            });
            //Marker에 클릭이벤트 등록.
            marker.addListener("click", function (evt) {
                console.log(evt)
                console.log(evt.toString())
                console.log(evt.map)
                document.getElementById("jshTest").innerHTML = 'Mouse Click!';
            });
            //Marker에 우클릭이벤트 등록
            marker.addListener("contextmenu", function (evt) {
                document.getElementById("jshTest").innerHTML = 'Mouse contextmenu!';
            });
            //Marker에 마우스가 마커 영역에 들어왔을때 이벤트 등록.
            marker.addListener("mouseenter", function (evt) {
                document.getElementById("result").innerHTML = 'Mouse Enter!';
            });
            //Marker에 마우스가 마커를 벗어났을때 이벤트 등록.
            marker.addListener("mouseleave", function (evt) {
                document.getElementById("result").innerHTML = 'Mouse Leave!';
            });

            //Marker draggable: true일때, 마커가 움직일때 이벤트 등록
            marker.addListener("drag", function (evt) {
                console.log("drag=" + evt.latLng);
            });
            //Marker draggable: true일때, 마커의 움직임이 끝날때 이벤트 등록
            marker.addListener("dragend", function (evt) {
                console.log("dragend=" + evt.latLng);
            });

            //모바일상에서 Marker draggable: true일때, 마커 터치를 시작할때 이벤트 등록
            marker.addListener("touchstart", function (evt) {
                console.log("touchstart=" + evt.latLng);
            });
            //모바일상에서 Marker draggable: true일때, 마커 터치가 끝날때 이벤트 등록
            marker.addListener("touchend", function (evt) {
                console.log("touchend=" + evt.latLng);
            });
            //모바일상에서 Marker draggable: true일때, 마커 터치 후 움직일때 이벤트 등록
            marker.addListener("touchmove", function (evt) {
                console.log("touchmove=" + evt.latLng);
            });

        }

        let labelArray = [];

        function label() {

            var content = "<div style='position: static; top: 320px; left : 320px; display: flex; font-size: 14px; box-shadow: 5px 5px 5px #00000040; border-radius: 10px; width : 400px; height:100px; background-color: rgba(0, 0, 0, 0.6); align-items: center; padding: 5px; color: #fff;'>" +
                "<div class='img-box' style='width: 110px; height: 90px; border-radius: 10px; background: #f5f5f5 url(/icon/greenOn.png) no-repeat center;'></div>" +
                "<div class='info-box' style='margin-left: 10px;'>" +
                "<p style='margin-bottom: 7px;'>" +
                "<span class='tit' style=' font-size: 16px; font-weight: bold;'>티맵 모빌리티</span>" +
                "<a href='http://tmapapi.sktelecom.com/' target='_blank' class='link' style='color: #41A0FF; font-size: 13px; margin-left: 10px;'>홈페이지</a>" +
                "<p>" +
                "<span class='new-addr'>테스트 1번</span>" +
                "</p>" +
                "<p>" +
                "<span class='old-addr'>테스트 1번</span>" +
                "</p>" +
                "</div>" +
                "<a href='javascript:void(0)' onclick='onClose()' class='btn-close' style='position: absolute; top: 10px; right: 10px; display: block; width: 15px; height: 15px; background: url(/icon/greenOn.png) no-repeat center;'></a>" +
                "</div>";
            var infoWindow = new Tmapv2.InfoWindow({
                position: new Tmapv2.LatLng(37.566481622437934, 126.98502302169841),
                content: content,
                border: '0px solid #FF0000',
                type: 2,
                map: map
            });

            labelArray.push(infoWindow);

        }

    </script>
</head>
<body onload="initTmap()"><!-- 맵 생성 실행 -->
<div id="map_div"></div>
<p id="jshTest"/><br>
<p id="result"/> <br>
<button onclick="label();"> 라벨 보기</button>
</body>
</html>